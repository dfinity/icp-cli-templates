# yaml-language-server: $schema=https://github.com/dfinity/icp-cli/raw/refs/tags/v0.1.0/docs/schemas/icp-yaml-schema.json

canisters:
  - backend

networks:
  - name: local
    mode: managed
{% if network_type == "Docker" -%}
    image: ghcr.io/dfinity/icp-cli-network-launcher
    port-mapping:
      - 0:4943
    args:
      - "--bitcoind-addr=host.docker.internal:18444"
{% else -%}
    bitcoind-addr:
      - "127.0.0.1:18444"
{% endif %}
environments:
  - name: local
    network: local
    settings:
      backend:
        environment_variables:
          BITCOIN_NETWORK: "regtest"

  - name: staging
    network: ic
    settings:
      backend:
        environment_variables:
          BITCOIN_NETWORK: "testnet"

  - name: production
    network: ic
    settings:
      backend:
        environment_variables:
          BITCOIN_NETWORK: "mainnet"
